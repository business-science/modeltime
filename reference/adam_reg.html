<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="adam_reg() is a way to generate a specification of an ADAM model
before fitting and allows the model to be created using
different packages. Currently the only package is smooth."><title>General Interface for ADAM Regression Models — adam_reg • modeltime</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet"><meta property="og:title" content="General Interface for ADAM Regression Models — adam_reg"><meta property="og:description" content="adam_reg() is a way to generate a specification of an ADAM model
before fitting and allows the model to be created using
different packages. Currently the only package is smooth."><meta property="og:image" content="https://business-science.github.io/modeltime/logo.png"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=G-20GDZ5LL77"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-20GDZ5LL77');
</script></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-dark navbar-expand-lg bg-primary"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">modeltime</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.2.7.9000</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item">
  <a class="nav-link" href="../index.html">
    <span class="fa fa-home"></span>
     
  </a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../articles/getting-started-with-modeltime.html">Getting Started</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <h6 class="dropdown-header" data-toc-skip>Getting Started</h6>
    <a class="dropdown-item" href="../articles/getting-started-with-modeltime.html">Getting Started with Modeltime</a>
    <div class="dropdown-divider"></div>
    <h6 class="dropdown-header" data-toc-skip>Forecasting Many Time Series (Scale)</h6>
    <a class="dropdown-item" href="../articles/modeling-panel-data.html">Global Model Forecasting</a>
    <a class="dropdown-item" href="../articles/nested-forecasting.html">Iterative (Nested) Forecasting</a>
    <div class="dropdown-divider"></div>
    <h6 class="dropdown-header" data-toc-skip>Advanced Topics</h6>
    <a class="dropdown-item" href="../articles/recursive-forecasting.html">Autoregressive (Recursive) Forecasting</a>
    <a class="dropdown-item" href="../articles/parallel-processing.html">Hyperparameter Tuning &amp; Parallel Processing</a>
    <a class="dropdown-item" href="../articles/modeltime-spark.html">The Modeltime Spark Backend</a>
    <div class="dropdown-divider"></div>
    <h6 class="dropdown-header" data-toc-skip>Algorithms</h6>
    <a class="dropdown-item" href="../articles/modeltime-model-list.html">Modeltime Algorithm Roadmap</a>
    <div class="dropdown-divider"></div>
    <h6 class="dropdown-header" data-toc-skip>Developers</h6>
    <a class="dropdown-item" href="../articles/extending-modeltime.html">Extending Modeltime (Developer Tools)</a>
  </div>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-api">API</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-api">
    <h6 class="dropdown-header" data-toc-skip>API Functions</h6>
    <a class="dropdown-item" href="../reference/index.html">
      <span class="fa fa-home"></span>
       
      Function Reference
    </a>
    <div class="dropdown-divider"></div>
    <h6 class="dropdown-header" data-toc-skip>Change History</h6>
    <a class="dropdown-item" href="../news/index.html">News</a>
  </div>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-ecosystem">Ecosystem</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-ecosystem">
    <h6 class="dropdown-header" data-toc-skip>Forecast</h6>
    <a class="dropdown-item" href="https://business-science.github.io/modeltime/">Modeltime (Forecasting)</a>
    <a class="external-link dropdown-item" href="https://business-science.github.io/timetk/">TimeTK (Time Series Analysis)</a>
    <div class="dropdown-divider"></div>
    <h6 class="dropdown-header" data-toc-skip>Improve</h6>
    <a class="dropdown-item" href="https://business-science.github.io/modeltime.ensemble/">Modeltime Ensemble (Blending Forecasts)</a>
    <a class="dropdown-item" href="https://business-science.github.io/modeltime.resample/">Modeltime Resample (Backtesting)</a>
    <div class="dropdown-divider"></div>
    <h6 class="dropdown-header" data-toc-skip>Scale</h6>
    <a class="dropdown-item" href="https://business-science.github.io/modeltime.h2o/">Modeltime H2O (AutoML)</a>
    <a class="dropdown-item" href="https://business-science.github.io/modeltime.gluonts/">Modeltime GluonTS (Deep Learning)</a>
  </div>
</li>
<li class="nav-item">
  <a class="external-link nav-link" href="https://university.business-science.io/p/ds4b-203-r-high-performance-time-series-forecasting/">
    <span class="fas fa fas fa-graduation-cap"></span>
     
    Learn
  </a>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/business-science/modeltime">
    <span class="fab fa fab fa-github"></span>
     
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>General Interface for ADAM Regression Models</h1>
      <small class="dont-index">Source: <a href="https://github.com/business-science/modeltime/blob/master/R/parsnip-adam.R" class="external-link"><code>R/parsnip-adam.R</code></a></small>
      <div class="d-none name"><code>adam_reg.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p><code>adam_reg()</code> is a way to generate a <em>specification</em> of an ADAM model
before fitting and allows the model to be created using
different packages. Currently the only package is <code>smooth</code>.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">adam_reg</span><span class="op">(</span></span>
<span>  mode <span class="op">=</span> <span class="st">"regression"</span>,</span>
<span>  ets_model <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  non_seasonal_ar <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  non_seasonal_differences <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  non_seasonal_ma <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  seasonal_ar <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  seasonal_differences <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  seasonal_ma <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  use_constant <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  regressors_treatment <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  outliers_treatment <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  outliers_ci <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  probability_model <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  distribution <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  loss <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  information_criteria <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  seasonal_period <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  select_order <span class="op">=</span> <span class="cn">NULL</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>mode</dt>
<dd><p>A single character string for the type of model.
The only possible value for this model is "regression".</p></dd>


<dt>ets_model</dt>
<dd><p>The type of ETS model. The first letter stands for the type of the error term ("A" or "M"),
the second (and sometimes the third as well) is for the trend ("N", "A", "Ad", "M" or "Md"), and the last one is
for the type of seasonality ("N", "A" or "M").</p></dd>


<dt>non_seasonal_ar</dt>
<dd><p>The order of the non-seasonal auto-regressive (AR) terms. Often denoted "p" in pdq-notation.</p></dd>


<dt>non_seasonal_differences</dt>
<dd><p>The order of integration for non-seasonal differencing. Often denoted "d" in pdq-notation.</p></dd>


<dt>non_seasonal_ma</dt>
<dd><p>The order of the non-seasonal moving average (MA) terms. Often denoted "q" in pdq-notation.</p></dd>


<dt>seasonal_ar</dt>
<dd><p>The order of the seasonal auto-regressive (SAR) terms. Often denoted "P" in PDQ-notation.</p></dd>


<dt>seasonal_differences</dt>
<dd><p>The order of integration for seasonal differencing. Often denoted "D" in PDQ-notation.</p></dd>


<dt>seasonal_ma</dt>
<dd><p>The order of the seasonal moving average (SMA) terms. Often denoted "Q" in PDQ-notation.</p></dd>


<dt>use_constant</dt>
<dd><p>Logical, determining, whether the constant is needed in the model or not. This is mainly needed for
ARIMA part of the model, but can be used for ETS as well.</p></dd>


<dt>regressors_treatment</dt>
<dd><p>The variable defines what to do with the provided explanatory variables: "use" means that all
of the data should be used, while "select" means that a selection using ic should be done, "adapt" will trigger the
mechanism of time varying parameters for the explanatory variables.</p></dd>


<dt>outliers_treatment</dt>
<dd><p>Defines what to do with outliers: "ignore", so just returning the model, "detect" outliers based
on specified level and include dummies for them in the model, or detect and "select" those of them that reduce ic value.</p></dd>


<dt>outliers_ci</dt>
<dd><p>What confidence level to use for detection of outliers. Default is 99%.</p></dd>


<dt>probability_model</dt>
<dd><p>The type of model used in probability estimation. Can be "none" - none, "fixed" - constant
probability, "general" - the general Beta model with two parameters, "odds-ratio" - the Odds-ratio model with b=1 in
Beta distribution, "inverse-odds-ratio" - the model with a=1 in Beta distribution, "direct" - the TSB-like
(Teunter et al., 2011) probability update mechanism a+b=1, "auto" - the automatically selected type of occurrence model.</p></dd>


<dt>distribution</dt>
<dd><p>what density function to assume for the error term. The full name of the distribution should be
provided, starting with the letter "d" - "density".</p></dd>


<dt>loss</dt>
<dd><p>The type of Loss Function used in optimization.</p></dd>


<dt>information_criteria</dt>
<dd><p>The information criterion to use in the model selection / combination procedure.</p></dd>


<dt>seasonal_period</dt>
<dd><p>A seasonal frequency. Uses "auto" by default.
A character phrase of "auto" or time-based phrase of "2 weeks"
can be used if a date or date-time variable is provided.
See Fit Details below.</p></dd>


<dt>select_order</dt>
<dd><p>If TRUE, then the function will select the most appropriate order. The values list(ar=...,i=...,ma=...)
specify the maximum orders to check in this case.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>The data given to the function are not saved and are only used
to determine the <em>mode</em> of the model. For <code>adam_reg()</code>, the
mode will always be "regression".</p>
<p>The model can be created using the <code><a href="https://generics.r-lib.org/reference/fit.html" class="external-link">fit()</a></code> function using the
following <em>engines</em>:</p><ul><li><p>"auto_adam" (default) - Connects to <code><a href="https://rdrr.io/pkg/smooth/man/adam.html" class="external-link">smooth::auto.adam()</a></code></p></li>
<li><p>"adam" - Connects to <code><a href="https://rdrr.io/pkg/smooth/man/adam.html" class="external-link">smooth::adam()</a></code></p></li>
</ul><p><strong>Main Arguments</strong></p>
<p>The main arguments (tuning parameters) for the model are:</p><ul><li><p><code>seasonal_period</code>: The periodic nature of the seasonality. Uses "auto" by default.</p></li>
<li><p><code>non_seasonal_ar</code>: The order of the non-seasonal auto-regressive (AR) terms.</p></li>
<li><p><code>non_seasonal_differences</code>: The order of integration for non-seasonal differencing.</p></li>
<li><p><code>non_seasonal_ma</code>: The order of the non-seasonal moving average (MA) terms.</p></li>
<li><p><code>seasonal_ar</code>: The order of the seasonal auto-regressive (SAR) terms.</p></li>
<li><p><code>seasonal_differences</code>: The order of integration for seasonal differencing.</p></li>
<li><p><code>seasonal_ma</code>: The order of the seasonal moving average (SMA) terms.</p></li>
<li><p><code>ets_model</code>: The type of ETS model.</p></li>
<li><p><code>use_constant</code>: Logical, determining, whether the constant is needed in the model or not.</p></li>
<li><p><code>regressors_treatment</code>: The variable defines what to do with the provided explanatory variables.</p></li>
<li><p><code>outliers_treatment</code>: Defines what to do with outliers.</p></li>
<li><p><code>probability_model</code>: The type of model used in probability estimation.</p></li>
<li><p><code>distribution</code>: what density function to assume for the error term.</p></li>
<li><p><code>loss</code>: The type of Loss Function used in optimization.</p></li>
<li><p><code>information_criteria</code>: The information criterion to use in the model selection / combination procedure.</p></li>
</ul><p>These arguments are converted to their specific names at the
time that the model is fit.</p>
<p>Other options and argument can be
set using <code><a href="https://parsnip.tidymodels.org/reference/set_engine.html" class="external-link">set_engine()</a></code> (See Engine Details below).</p>
<p>If parameters need to be modified, <code><a href="https://rdrr.io/r/stats/update.html" class="external-link">update()</a></code> can be used
in lieu of recreating the object from scratch.</p>
<p><strong>auto_adam (default engine)</strong></p>
<p>The engine uses <code><a href="https://rdrr.io/pkg/smooth/man/adam.html" class="external-link">smooth::auto.adam()</a></code>.</p>
<p>Function Parameters:</p>
<p></p><div class="sourceCode"><pre><code><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Registered S3 method overwritten by 'greybox':</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   method     from</span></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   print.pcor lava</span></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; function (data, model = "ZXZ", lags = c(frequency(data)), orders = list(ar = c(0), </span></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;     i = c(0), ma = c(0), select = FALSE), formula = NULL, regressors = c("use", </span></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;     "select", "adapt"), occurrence = c("none", "auto", "fixed", "general", </span></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;     "odds-ratio", "inverse-odds-ratio", "direct"), distribution = c("dnorm", </span></span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;     "dlaplace", "ds", "dgnorm", "dlnorm", "dinvgauss", "dgamma"), outliers = c("ignore", </span></span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;     "use", "select"), level = 0.99, h = 0, holdout = FALSE, persistence = NULL, </span></span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;     phi = NULL, initial = c("optimal", "backcasting", "complete"), arma = NULL, </span></span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;     ic = c("AICc", "AIC", "BIC", "BICc"), bounds = c("usual", "admissible", </span></span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;         "none"), silent = TRUE, parallel = FALSE, ...)</span></span></code></pre><p></p></div>
<p>The <em>MAXIMUM</em> nonseasonal ARIMA terms (<code>max.p</code>, <code>max.d</code>, <code>max.q</code>) and
seasonal ARIMA terms (<code>max.P</code>, <code>max.D</code>, <code>max.Q</code>) are provided to
<code><a href="https://pkg.robjhyndman.com/forecast/reference/auto.arima.html" class="external-link">forecast::auto.arima()</a></code> via <code><a href="arima_reg.html">arima_reg()</a></code> parameters.
Other options and argument can be set using <code><a href="https://parsnip.tidymodels.org/reference/set_engine.html" class="external-link">set_engine()</a></code>.</p>
<p>Parameter Notes:</p><ul><li><p>All values of nonseasonal pdq and seasonal PDQ are maximums.
The <code><a href="https://rdrr.io/pkg/smooth/man/adam.html" class="external-link">smooth::auto.adam()</a></code> model will select a value using these as an upper limit.</p></li>
<li><p><code>xreg</code> - This is supplied via the parsnip / modeltime <code><a href="https://generics.r-lib.org/reference/fit.html" class="external-link">fit()</a></code> interface
(so don't provide this manually). See Fit Details (below).</p></li>
</ul><p><strong>adam</strong></p>
<p>The engine uses <code><a href="https://rdrr.io/pkg/smooth/man/adam.html" class="external-link">smooth::adam()</a></code>.</p>
<p>Function Parameters:</p>
<p></p><div class="sourceCode"><pre><code><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; function (data, model = "ZXZ", lags = c(frequency(data)), orders = list(ar = c(0), </span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;     i = c(0), ma = c(0), select = FALSE), constant = FALSE, formula = NULL, </span></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;     regressors = c("use", "select", "adapt"), occurrence = c("none", "auto", </span></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;         "fixed", "general", "odds-ratio", "inverse-odds-ratio", "direct"), </span></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;     distribution = c("default", "dnorm", "dlaplace", "ds", "dgnorm", "dlnorm", </span></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;         "dinvgauss", "dgamma"), loss = c("likelihood", "MSE", "MAE", "HAM", </span></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;         "LASSO", "RIDGE", "MSEh", "TMSE", "GTMSE", "MSCE"), outliers = c("ignore", </span></span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;         "use", "select"), level = 0.99, h = 0, holdout = FALSE, persistence = NULL, </span></span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;     phi = NULL, initial = c("optimal", "backcasting", "complete"), arma = NULL, </span></span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;     ic = c("AICc", "AIC", "BIC", "BICc"), bounds = c("usual", "admissible", </span></span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;         "none"), silent = TRUE, ...)</span></span></code></pre><p></p></div>
<p>The nonseasonal ARIMA terms (<code>orders</code>) and seasonal ARIMA terms (<code>orders</code>)
are provided to <code><a href="https://rdrr.io/pkg/smooth/man/adam.html" class="external-link">smooth::adam()</a></code> via <code>adam_reg()</code> parameters.
Other options and argument can be set using <code><a href="https://parsnip.tidymodels.org/reference/set_engine.html" class="external-link">set_engine()</a></code>.</p>
<p>Parameter Notes:</p><ul><li><p><code>xreg</code> - This is supplied via the parsnip / modeltime <code><a href="https://generics.r-lib.org/reference/fit.html" class="external-link">fit()</a></code> interface
(so don't provide this manually). See Fit Details (below).</p></li>
</ul></div>
    <div class="section level2">
    <h2 id="fit-details">Fit Details<a class="anchor" aria-label="anchor" href="#fit-details"></a></h2>
    


<p><strong>Date and Date-Time Variable</strong></p>
<p>It's a requirement to have a date or date-time variable as a predictor.
The <code><a href="https://generics.r-lib.org/reference/fit.html" class="external-link">fit()</a></code> interface accepts date and date-time features and handles them internally.</p><ul><li><p><code>fit(y ~ date)</code></p></li>
</ul><p><em>Seasonal Period Specification</em></p>
<p>The period can be non-seasonal (<code>seasonal_period = 1 or "none"</code>) or
yearly seasonal (e.g. For monthly time stamps, <code>seasonal_period = 12</code>, <code>seasonal_period = "12 months"</code>, or <code>seasonal_period = "yearly"</code>).
There are 3 ways to specify:</p><ol><li><p><code>seasonal_period = "auto"</code>: A seasonal period is selected based on the periodicity of the data (e.g. 12 if monthly)</p></li>
<li><p><code>seasonal_period = 12</code>: A numeric frequency. For example, 12 is common for monthly data</p></li>
<li><p><code>seasonal_period = "1 year"</code>: A time-based phrase. For example, "1 year" would convert to 12 for monthly data.</p></li>
</ol><p><strong>Univariate (No xregs, Exogenous Regressors):</strong></p>
<p>For univariate analysis, you must include a date or date-time feature. Simply use:</p><ul><li><p>Formula Interface (recommended): <code>fit(y ~ date)</code> will ignore xreg's.</p></li>
</ul><p><strong>Multivariate (xregs, Exogenous Regressors)</strong></p>
<p>The <code>xreg</code> parameter is populated using the <code><a href="https://generics.r-lib.org/reference/fit.html" class="external-link">fit()</a></code> function:</p><ul><li><p>Only <code>factor</code>, <code>ordered factor</code>, and <code>numeric</code> data will be used as xregs.</p></li>
<li><p>Date and Date-time variables are not used as xregs</p></li>
<li><p><code>character</code> data should be converted to factor.</p></li>
</ul><p><em>Xreg Example:</em> Suppose you have 3 features:</p><ol><li><p><code>y</code> (target)</p></li>
<li><p><code>date</code> (time stamp),</p></li>
<li><p><code>month.lbl</code> (labeled month as a ordered factor).</p></li>
</ol><p>The <code>month.lbl</code> is an exogenous regressor that can be passed to the <code><a href="arima_reg.html">arima_reg()</a></code> using
<code><a href="https://generics.r-lib.org/reference/fit.html" class="external-link">fit()</a></code>:</p><ul><li><p><code>fit(y ~ date + month.lbl)</code> will pass <code>month.lbl</code> on as an exogenous regressor.</p></li>
</ul><p>Note that date or date-time class values are excluded from <code>xreg</code>.</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p><code><a href="https://parsnip.tidymodels.org/reference/fit.html" class="external-link">fit.model_spec()</a></code>, <code><a href="https://parsnip.tidymodels.org/reference/set_engine.html" class="external-link">set_engine()</a></code></p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># \donttest{</span></span></span>
<span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Attaching package: ‘dplyr’</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> The following objects are masked from ‘package:stats’:</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>     filter, lag</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> The following objects are masked from ‘package:base’:</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>     intersect, setdiff, setequal, union</span>
<span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/tidymodels/parsnip" class="external-link">parsnip</a></span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://rsample.tidymodels.org" class="external-link">rsample</a></span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/business-science/timetk" class="external-link">timetk</a></span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Registered S3 method overwritten by 'lava':</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>   method     from   </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>   print.pcor greybox</span>
<span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/business-science/modeltime" class="external-link">modeltime</a></span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/config-i1/smooth" class="external-link">smooth</a></span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Loading required package: greybox</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Package "greybox", v1.0.8 loaded.</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> This is package "smooth", v3.2.1</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Attaching package: ‘smooth’</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> The following object is masked from ‘package:parsnip’:</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>     pls</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Data</span></span></span>
<span class="r-in"><span><span class="va">m750</span> <span class="op">&lt;-</span> <span class="va">m4_monthly</span> <span class="op"><a href="pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">id</span> <span class="op">==</span> <span class="st">"M750"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">m750</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 306 × 3</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    id    date       value</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span> <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 1</span> M750  1990-01-01  <span style="text-decoration: underline;">6</span>370</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 2</span> M750  1990-02-01  <span style="text-decoration: underline;">6</span>430</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 3</span> M750  1990-03-01  <span style="text-decoration: underline;">6</span>520</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 4</span> M750  1990-04-01  <span style="text-decoration: underline;">6</span>580</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 5</span> M750  1990-05-01  <span style="text-decoration: underline;">6</span>620</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 6</span> M750  1990-06-01  <span style="text-decoration: underline;">6</span>690</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 7</span> M750  1990-07-01  <span style="text-decoration: underline;">6</span>000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 8</span> M750  1990-08-01  <span style="text-decoration: underline;">5</span>450</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 9</span> M750  1990-09-01  <span style="text-decoration: underline;">6</span>480</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">10</span> M750  1990-10-01  <span style="text-decoration: underline;">6</span>820</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># ℹ 296 more rows</span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Split Data 80/20</span></span></span>
<span class="r-in"><span><span class="va">splits</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rsample.tidymodels.org/reference/initial_split.html" class="external-link">initial_time_split</a></span><span class="op">(</span><span class="va">m750</span>, prop <span class="op">=</span> <span class="fl">0.8</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># ---- AUTO ADAM ----</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Model Spec</span></span></span>
<span class="r-in"><span><span class="va">model_spec</span> <span class="op">&lt;-</span> <span class="fu">adam_reg</span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="pipe.html">%&gt;%</a></span></span></span>
<span class="r-in"><span>    <span class="fu"><a href="https://parsnip.tidymodels.org/reference/set_engine.html" class="external-link">set_engine</a></span><span class="op">(</span><span class="st">"auto_adam"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Fit Spec</span></span></span>
<span class="r-in"><span><span class="va">model_fit</span> <span class="op">&lt;-</span> <span class="va">model_spec</span> <span class="op"><a href="pipe.html">%&gt;%</a></span></span></span>
<span class="r-in"><span>    <span class="fu"><a href="https://generics.r-lib.org/reference/fit.html" class="external-link">fit</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/Log.html" class="external-link">log</a></span><span class="op">(</span><span class="va">value</span><span class="op">)</span> <span class="op">~</span> <span class="va">date</span>, data <span class="op">=</span> <span class="fu"><a href="https://rsample.tidymodels.org/reference/initial_split.html" class="external-link">training</a></span><span class="op">(</span><span class="va">splits</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> frequency = 12 observations per 1 year</span>
<span class="r-in"><span><span class="va">model_fit</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> parsnip model object</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Time elapsed: 2.55 seconds</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Model estimated using auto.adam() function: ETS(AAdN)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Distribution assumed in the model: S</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Loss function type: likelihood; Loss function value: -471.3768</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Persistence vector g:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> alpha  beta </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     1     0 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Damping parameter: 0.9784</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Sample size: 244</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Number of estimated parameters: 6</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Number of degrees of freedom: 238</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Information criteria:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       AIC      AICc       BIC      BICc </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> -930.7536 -930.3991 -909.7706 -908.7964 </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># ---- STANDARD ADAM ----</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Model Spec</span></span></span>
<span class="r-in"><span><span class="va">model_spec</span> <span class="op">&lt;-</span> <span class="fu">adam_reg</span><span class="op">(</span></span></span>
<span class="r-in"><span>        seasonal_period          <span class="op">=</span> <span class="fl">12</span>,</span></span>
<span class="r-in"><span>        non_seasonal_ar          <span class="op">=</span> <span class="fl">3</span>,</span></span>
<span class="r-in"><span>        non_seasonal_differences <span class="op">=</span> <span class="fl">1</span>,</span></span>
<span class="r-in"><span>        non_seasonal_ma          <span class="op">=</span> <span class="fl">3</span>,</span></span>
<span class="r-in"><span>        seasonal_ar              <span class="op">=</span> <span class="fl">1</span>,</span></span>
<span class="r-in"><span>        seasonal_differences     <span class="op">=</span> <span class="fl">0</span>,</span></span>
<span class="r-in"><span>        seasonal_ma              <span class="op">=</span> <span class="fl">1</span></span></span>
<span class="r-in"><span>    <span class="op">)</span> <span class="op"><a href="pipe.html">%&gt;%</a></span></span></span>
<span class="r-in"><span>    <span class="fu"><a href="https://parsnip.tidymodels.org/reference/set_engine.html" class="external-link">set_engine</a></span><span class="op">(</span><span class="st">"adam"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Fit Spec</span></span></span>
<span class="r-in"><span><span class="va">model_fit</span> <span class="op">&lt;-</span> <span class="va">model_spec</span> <span class="op"><a href="pipe.html">%&gt;%</a></span></span></span>
<span class="r-in"><span>    <span class="fu"><a href="https://generics.r-lib.org/reference/fit.html" class="external-link">fit</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/Log.html" class="external-link">log</a></span><span class="op">(</span><span class="va">value</span><span class="op">)</span> <span class="op">~</span> <span class="va">date</span>, data <span class="op">=</span> <span class="fu"><a href="https://rsample.tidymodels.org/reference/initial_split.html" class="external-link">training</a></span><span class="op">(</span><span class="va">splits</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">model_fit</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> parsnip model object</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Time elapsed: 0.85 seconds</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Model estimated using adam() function: ETS(ANN)+ARIMA(3,1,3)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Distribution assumed in the model: Normal</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Loss function type: likelihood; Loss function value: -447.6852</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Persistence vector g:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> alpha </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 0.083 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ARMA parameters of the model:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> AR:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> phi1[1] phi2[1] phi3[1] </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  0.1521 -0.1300 -0.8413 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> MA:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> theta1[1] theta2[1] theta3[1] </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   -0.1878    0.0685    0.8200 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Sample size: 244</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Number of estimated parameters: 13</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Number of degrees of freedom: 231</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Information criteria:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       AIC      AICc       BIC      BICc </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> -869.3703 -867.7877 -823.9072 -819.5572 </span>
<span class="r-in"><span><span class="co"># }</span></span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by Matt Dancho.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer></div>

  

  

  </body></html>

