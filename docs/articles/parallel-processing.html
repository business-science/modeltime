<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Hyperparameter Tuning with Parallel Processing • modeltime</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/flatly/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet">
<meta property="og:title" content="Hyperparameter Tuning with Parallel Processing">
<meta property="og:description" content="modeltime">
<meta property="og:image" content="/logo.png">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=UA-76139189-2"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-76139189-2');
</script>
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">modeltime</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.7.0.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fa fa-home"></span>
     
  </a>
</li>
<li>
  <a href="../articles/getting-started-with-modeltime.html">Getting Started</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li class="dropdown-header">Getting Started</li>
    <li>
      <a href="../articles/getting-started-with-modeltime.html">Getting Started with Modeltime</a>
    </li>
    <li class="divider">
    <li class="dropdown-header">Forecasting Many Time Series (Scale)</li>
    <li>
      <a href="../articles/modeling-panel-data.html">Global Model Forecasting</a>
    </li>
    <li>
      <a href="../articles/nested-forecasting.html">Iterative (Nested) Forecasting</a>
    </li>
    <li class="divider">
    <li class="dropdown-header">Advanced Topics</li>
    <li>
      <a href="../articles/recursive-forecasting.html">Autoregressive (Recursive) Forecasting</a>
    </li>
    <li>
      <a href="../articles/parallel-processing.html">Hyperparameter Tuning &amp; Parallel Processing</a>
    </li>
    <li class="divider">
    <li class="dropdown-header">Algorithms</li>
    <li>
      <a href="../articles/modeltime-model-list.html">Modeltime Algorithm Roadmap</a>
    </li>
    <li class="divider">
    <li class="dropdown-header">Developers</li>
    <li>
      <a href="../articles/extending-modeltime.html">Extending Modeltime (Developer Tools)</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    API
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li class="dropdown-header">API Functions</li>
    <li>
      <a href="../reference/index.html">
        <span class="fa fa-home"></span>
         
        Function Reference
      </a>
    </li>
    <li class="divider">
    <li class="dropdown-header">Change History</li>
    <li>
      <a href="../news/index.html">News</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Ecosystem
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li class="dropdown-header">Forecast</li>
    <li>
      <a href="https://business-science.github.io/modeltime/">Modeltime (Forecasting)</a>
    </li>
    <li>
      <a href="https://business-science.github.io/timetk/">TimeTK (Time Series Analysis)</a>
    </li>
    <li class="divider">
    <li class="dropdown-header">Improve</li>
    <li>
      <a href="https://business-science.github.io/modeltime.ensemble/">Modeltime Ensemble (Blending Forecasts)</a>
    </li>
    <li>
      <a href="https://business-science.github.io/modeltime.resample/">Modeltime Resample (Backtesting)</a>
    </li>
    <li class="divider">
    <li class="dropdown-header">Scale</li>
    <li>
      <a href="https://business-science.github.io/modeltime.h2o/">Modeltime H2O (AutoML)</a>
    </li>
    <li>
      <a href="https://business-science.github.io/modeltime.gluonts/">Modeltime GluonTS (Deep Learning)</a>
    </li>
  </ul>
</li>
<li>
  <a href="https://university.business-science.io/p/ds4b-203-r-high-performance-time-series-forecasting/">
    <span class="fas fa-graduation-cap"></span>
     
    Learn
  </a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/business-science/modeltime">
    <span class="fab fa-github"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="parallel-processing_files/header-attrs-2.9/header-attrs.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Hyperparameter Tuning with Parallel Processing</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/business-science/modeltime/blob/master/vignettes/parallel-processing.Rmd"><code>vignettes/parallel-processing.Rmd</code></a></small>
      <div class="hidden name"><code>parallel-processing.Rmd</code></div>

    </div>

    
    
<blockquote>
<p>Train <code>modeltime</code> models at scale with parallel processing</p>
</blockquote>
<p>Fitting many time series models can be an expensive process. To help speed up computation, <code>modeltime</code> now includes <strong>parallel processing</strong>, which is support for high-performance computing by spreading the model fitting steps across multiple CPUs or clusters.</p>
<p>In this example, we go through a common <strong>Hyperparameter Tuning</strong> workflow that shows off the <code>modeltime</code> parallel processing integration and support for <code>workflowsets</code> from the tidymodels ecosystem.</p>
<div id="out-of-the-box-parallel-processing-functionality-included" class="section level1">
<h1 class="hasAnchor">
<a href="#out-of-the-box-parallel-processing-functionality-included" class="anchor"></a>Out-of-the-Box<br><small>Parallel Processing Functionality Included</small>
</h1>
<p>The <code>modeltime</code> package (&gt;= 0.6.1) comes with <strong>parallel processing functionality.</strong></p>
<ul>
<li><p>Use of <code><a href="../reference/parallel_start.html">parallel_start()</a></code> and <code><a href="../reference/parallel_start.html">parallel_stop()</a></code> to simplify the parallel processing setup.</p></li>
<li><p>Use of <code><a href="../reference/create_model_grid.html">create_model_grid()</a></code> to help generating <code>parsnip</code> model specs from <code>dials</code> parameter grids.</p></li>
<li><p>Use of <code><a href="../reference/modeltime_fit_workflowset.html">modeltime_fit_workflowset()</a></code> for initial fitting many models in parallel using <code>workflowsets</code> from the <code>tidymodels</code> ecosystem.</p></li>
<li><p>Use of <code><a href="../reference/modeltime_refit.html">modeltime_refit()</a></code> to refit models in parallel.</p></li>
<li><p>Use of <code><a href="../reference/control_fit_workflowset.html">control_fit_workflowset()</a></code> and <code><a href="../reference/control_refit.html">control_refit()</a></code> for controlling the fitting and refitting of many models.</p></li>
</ul>
</div>
<div id="how-to-use-parallel-processing" class="section level1">
<h1 class="hasAnchor">
<a href="#how-to-use-parallel-processing" class="anchor"></a>How to Use Parallel Processing</h1>
<p>Let’s go through a common <strong>Hyperparameter Tuning</strong> workflow that shows off the <code>modeltime</code> <strong>parallel processing integration</strong> and support for <code>workflowsets</code> from the tidymodels ecosystem.</p>
<div id="libraries" class="section level2">
<h2 class="hasAnchor">
<a href="#libraries" class="anchor"></a>Libraries</h2>
<p>Load the following libraries.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Machine Learning</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/business-science/modeltime">modeltime</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://tidymodels.tidymodels.org">tidymodels</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/tidymodels/workflowsets">workflowsets</a></span><span class="op">)</span>

<span class="co"># Core</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://tidyverse.tidyverse.org">tidyverse</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/business-science/timetk">timetk</a></span><span class="op">)</span></code></pre></div>
</div>
<div id="setup-parallel-backend" class="section level2">
<h2 class="hasAnchor">
<a href="#setup-parallel-backend" class="anchor"></a>Setup Parallel Backend</h2>
<p>I’ll set up this tutorial to use two (2) cores.</p>
<ul>
<li>To simplify creating clusters, <code>modeltime</code> includes <code><a href="../reference/parallel_start.html">parallel_start()</a></code>. We can simply supply the number of cores we’d like to use.</li>
<li>To detect how many physical cores you have, you can run <code><a href="https://rdrr.io/r/parallel/detectCores.html">parallel::detectCores(logical = FALSE)</a></code>.</li>
</ul>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/parallel_start.html">parallel_start</a></span><span class="op">(</span><span class="fl">2</span><span class="op">)</span></code></pre></div>
</div>
<div id="load-data" class="section level2">
<h2 class="hasAnchor">
<a href="#load-data" class="anchor"></a>Load Data</h2>
<p>We’ll use the <code>walmart_sales_weeekly</code> dataset from <code>timetk</code>. It has seven (7) time series that represent weekly sales demand by department.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">dataset_tbl</span> <span class="op">&lt;-</span> <span class="va">walmart_sales_weekly</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="va">id</span>, <span class="va">Date</span>, <span class="va">Weekly_Sales</span><span class="op">)</span>

<span class="va">dataset_tbl</span> <span class="op">%&gt;%</span> 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span><span class="op">(</span><span class="va">id</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://rdrr.io/pkg/timetk/man/plot_time_series.html">plot_time_series</a></span><span class="op">(</span>
    .date_var    <span class="op">=</span> <span class="va">Date</span>, 
    .value       <span class="op">=</span> <span class="va">Weekly_Sales</span>, 
    .facet_ncol  <span class="op">=</span> <span class="fl">2</span>, 
    .interactive <span class="op">=</span> <span class="cn">FALSE</span>
  <span class="op">)</span></code></pre></div>
<p><img src="parallel-processing_files/figure-html/unnamed-chunk-4-1.png" width="100%" style="display: block; margin: auto;"></p>
</div>
<div id="train-test-splits" class="section level2">
<h2 class="hasAnchor">
<a href="#train-test-splits" class="anchor"></a>Train / Test Splits</h2>
<p>Use <code><a href="https://rdrr.io/pkg/timetk/man/time_series_split.html">time_series_split()</a></code> to make a temporal split for all seven time series.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">splits</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/timetk/man/time_series_split.html">time_series_split</a></span><span class="op">(</span>
  <span class="va">dataset_tbl</span>, 
  assess     <span class="op">=</span> <span class="st">"6 months"</span>, 
  cumulative <span class="op">=</span> <span class="cn">TRUE</span>
<span class="op">)</span>

<span class="va">splits</span> <span class="op">%&gt;%</span> 
  <span class="fu"><a href="https://rdrr.io/pkg/timetk/man/tk_time_series_cv_plan.html">tk_time_series_cv_plan</a></span><span class="op">(</span><span class="op">)</span> <span class="op">%&gt;%</span> 
  <span class="fu"><a href="https://rdrr.io/pkg/timetk/man/plot_time_series_cv_plan.html">plot_time_series_cv_plan</a></span><span class="op">(</span><span class="va">Date</span>, <span class="va">Weekly_Sales</span>, .interactive <span class="op">=</span> <span class="cn">F</span><span class="op">)</span></code></pre></div>
<p><img src="parallel-processing_files/figure-html/unnamed-chunk-5-1.png" width="100%" style="display: block; margin: auto;"></p>
</div>
<div id="recipe" class="section level2">
<h2 class="hasAnchor">
<a href="#recipe" class="anchor"></a>Recipe</h2>
<p>Make a preprocessing recipe that generates time series features.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">recipe_spec_1</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://recipes.tidymodels.org/reference/recipe.html">recipe</a></span><span class="op">(</span><span class="va">Weekly_Sales</span> <span class="op">~</span> <span class="va">.</span>, data <span class="op">=</span> <span class="fu"><a href="https://rsample.tidymodels.org/reference/initial_split.html">training</a></span><span class="op">(</span><span class="va">splits</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://rdrr.io/pkg/timetk/man/step_timeseries_signature.html">step_timeseries_signature</a></span><span class="op">(</span><span class="va">Date</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://recipes.tidymodels.org/reference/step_rm.html">step_rm</a></span><span class="op">(</span><span class="va">Date</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://recipes.tidymodels.org/reference/step_normalize.html">step_normalize</a></span><span class="op">(</span><span class="va">Date_index.num</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://recipes.tidymodels.org/reference/step_zv.html">step_zv</a></span><span class="op">(</span><span class="fu"><a href="https://recipes.tidymodels.org/reference/has_role.html">all_predictors</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://recipes.tidymodels.org/reference/step_dummy.html">step_dummy</a></span><span class="op">(</span><span class="fu"><a href="https://recipes.tidymodels.org/reference/has_role.html">all_nominal_predictors</a></span><span class="op">(</span><span class="op">)</span>, one_hot <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></code></pre></div>
</div>
<div id="model-specifications" class="section level2">
<h2 class="hasAnchor">
<a href="#model-specifications" class="anchor"></a>Model Specifications</h2>
<p>We’ll make 6 <code>xgboost</code> model specifications using <code><a href="https://parsnip.tidymodels.org/reference/boost_tree.html">boost_tree()</a></code> and the “xgboost” engine. These will be combined with the <code>recipe</code> from the previous step using a <code><a href="https://workflowsets.tidymodels.org/reference/workflow_set.html">workflow_set()</a></code> in the next section.</p>
<div id="the-general-idea" class="section level3">
<h3 class="hasAnchor">
<a href="#the-general-idea" class="anchor"></a>The general idea</h3>
<p>We can vary the <code>learn_rate</code> parameter to see it’s effect on forecast error.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># XGBOOST MODELS</span>
<span class="va">model_spec_xgb_1</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://parsnip.tidymodels.org/reference/boost_tree.html">boost_tree</a></span><span class="op">(</span>learn_rate <span class="op">=</span> <span class="fl">0.001</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://parsnip.tidymodels.org/reference/set_engine.html">set_engine</a></span><span class="op">(</span><span class="st">"xgboost"</span><span class="op">)</span>

<span class="va">model_spec_xgb_2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://parsnip.tidymodels.org/reference/boost_tree.html">boost_tree</a></span><span class="op">(</span>learn_rate <span class="op">=</span> <span class="fl">0.010</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://parsnip.tidymodels.org/reference/set_engine.html">set_engine</a></span><span class="op">(</span><span class="st">"xgboost"</span><span class="op">)</span>

<span class="va">model_spec_xgb_3</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://parsnip.tidymodels.org/reference/boost_tree.html">boost_tree</a></span><span class="op">(</span>learn_rate <span class="op">=</span> <span class="fl">0.100</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://parsnip.tidymodels.org/reference/set_engine.html">set_engine</a></span><span class="op">(</span><span class="st">"xgboost"</span><span class="op">)</span>

<span class="va">model_spec_xgb_4</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://parsnip.tidymodels.org/reference/boost_tree.html">boost_tree</a></span><span class="op">(</span>learn_rate <span class="op">=</span> <span class="fl">0.350</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://parsnip.tidymodels.org/reference/set_engine.html">set_engine</a></span><span class="op">(</span><span class="st">"xgboost"</span><span class="op">)</span>

<span class="va">model_spec_xgb_5</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://parsnip.tidymodels.org/reference/boost_tree.html">boost_tree</a></span><span class="op">(</span>learn_rate <span class="op">=</span> <span class="fl">0.500</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://parsnip.tidymodels.org/reference/set_engine.html">set_engine</a></span><span class="op">(</span><span class="st">"xgboost"</span><span class="op">)</span>

<span class="va">model_spec_xgb_6</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://parsnip.tidymodels.org/reference/boost_tree.html">boost_tree</a></span><span class="op">(</span>learn_rate <span class="op">=</span> <span class="fl">0.650</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://parsnip.tidymodels.org/reference/set_engine.html">set_engine</a></span><span class="op">(</span><span class="st">"xgboost"</span><span class="op">)</span></code></pre></div>
</div>
<div id="a-faster-way" class="section level3">
<h3 class="hasAnchor">
<a href="#a-faster-way" class="anchor"></a>A faster way</h3>
<p>You may notice that this is a lot of repeated code to adjust the <code>learn_rate</code>. To simplify this process, we can use <code><a href="../reference/create_model_grid.html">create_model_grid()</a></code>.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">model_tbl</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html">tibble</a></span><span class="op">(</span>
  learn_rate <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">0.001</span>, <span class="fl">0.010</span>, <span class="fl">0.100</span>, <span class="fl">0.350</span>, <span class="fl">0.500</span>, <span class="fl">0.650</span><span class="op">)</span>
<span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="../reference/create_model_grid.html">create_model_grid</a></span><span class="op">(</span>
    f_model_spec <span class="op">=</span> <span class="va">boost_tree</span>,
    engine_name  <span class="op">=</span> <span class="st">"xgboost"</span>,
    mode         <span class="op">=</span> <span class="st">"regression"</span>
  <span class="op">)</span>

<span class="va">model_tbl</span>
<span class="co">#&gt; # A tibble: 6 × 2</span>
<span class="co">#&gt;   learn_rate .models  </span>
<span class="co">#&gt;        &lt;dbl&gt; &lt;list&gt;   </span>
<span class="co">#&gt; 1      0.001 &lt;spec[+]&gt;</span>
<span class="co">#&gt; 2      0.01  &lt;spec[+]&gt;</span>
<span class="co">#&gt; 3      0.1   &lt;spec[+]&gt;</span>
<span class="co">#&gt; 4      0.35  &lt;spec[+]&gt;</span>
<span class="co">#&gt; 5      0.5   &lt;spec[+]&gt;</span>
<span class="co">#&gt; 6      0.65  &lt;spec[+]&gt;</span></code></pre></div>
</div>
<div id="extracting-the-model-list" class="section level3">
<h3 class="hasAnchor">
<a href="#extracting-the-model-list" class="anchor"></a>Extracting the model list</h3>
<p>We can extract the model list for use with our <code>workflowset</code> next. This is the same result if we would have placed the manually generated 6 model specs into a <code><a href="https://rdrr.io/r/base/list.html">list()</a></code>.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">model_list</span> <span class="op">&lt;-</span> <span class="va">model_tbl</span><span class="op">$</span><span class="va">.models</span>

<span class="va">model_list</span>
<span class="co">#&gt; [[1]]</span>
<span class="co">#&gt; Boosted Tree Model Specification (regression)</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Main Arguments:</span>
<span class="co">#&gt;   learn_rate = 0.001</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Computational engine: xgboost </span>
<span class="co">#&gt; </span>
<span class="co">#&gt; </span>
<span class="co">#&gt; [[2]]</span>
<span class="co">#&gt; Boosted Tree Model Specification (regression)</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Main Arguments:</span>
<span class="co">#&gt;   learn_rate = 0.01</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Computational engine: xgboost </span>
<span class="co">#&gt; </span>
<span class="co">#&gt; </span>
<span class="co">#&gt; [[3]]</span>
<span class="co">#&gt; Boosted Tree Model Specification (regression)</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Main Arguments:</span>
<span class="co">#&gt;   learn_rate = 0.1</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Computational engine: xgboost </span>
<span class="co">#&gt; </span>
<span class="co">#&gt; </span>
<span class="co">#&gt; [[4]]</span>
<span class="co">#&gt; Boosted Tree Model Specification (regression)</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Main Arguments:</span>
<span class="co">#&gt;   learn_rate = 0.35</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Computational engine: xgboost </span>
<span class="co">#&gt; </span>
<span class="co">#&gt; </span>
<span class="co">#&gt; [[5]]</span>
<span class="co">#&gt; Boosted Tree Model Specification (regression)</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Main Arguments:</span>
<span class="co">#&gt;   learn_rate = 0.5</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Computational engine: xgboost </span>
<span class="co">#&gt; </span>
<span class="co">#&gt; </span>
<span class="co">#&gt; [[6]]</span>
<span class="co">#&gt; Boosted Tree Model Specification (regression)</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Main Arguments:</span>
<span class="co">#&gt;   learn_rate = 0.65</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Computational engine: xgboost</span></code></pre></div>
</div>
</div>
<div id="workflowsets" class="section level2">
<h2 class="hasAnchor">
<a href="#workflowsets" class="anchor"></a>Workflowsets</h2>
<p>With the <code><a href="https://workflowsets.tidymodels.org/reference/workflow_set.html">workflow_set()</a></code> function, we can combine the 6 xgboost models with the 1 recipe to return six (6) combinations of recipe and model specifications. These are currently untrained (unfitted).</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">model_wfset</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://workflowsets.tidymodels.org/reference/workflow_set.html">workflow_set</a></span><span class="op">(</span>
  preproc <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>
    <span class="va">recipe_spec_1</span>
  <span class="op">)</span>,
  models <span class="op">=</span> <span class="va">model_list</span>, 
  cross <span class="op">=</span> <span class="cn">TRUE</span>
<span class="op">)</span>

<span class="va">model_wfset</span>
<span class="co">#&gt; # A workflow set/tibble: 6 × 4</span>
<span class="co">#&gt;   wflow_id            info             option    result    </span>
<span class="co">#&gt;   &lt;chr&gt;               &lt;list&gt;           &lt;list&gt;    &lt;list&gt;    </span>
<span class="co">#&gt; 1 recipe_boost_tree_1 &lt;tibble [1 × 4]&gt; &lt;opts[0]&gt; &lt;list [0]&gt;</span>
<span class="co">#&gt; 2 recipe_boost_tree_2 &lt;tibble [1 × 4]&gt; &lt;opts[0]&gt; &lt;list [0]&gt;</span>
<span class="co">#&gt; 3 recipe_boost_tree_3 &lt;tibble [1 × 4]&gt; &lt;opts[0]&gt; &lt;list [0]&gt;</span>
<span class="co">#&gt; 4 recipe_boost_tree_4 &lt;tibble [1 × 4]&gt; &lt;opts[0]&gt; &lt;list [0]&gt;</span>
<span class="co">#&gt; 5 recipe_boost_tree_5 &lt;tibble [1 × 4]&gt; &lt;opts[0]&gt; &lt;list [0]&gt;</span>
<span class="co">#&gt; 6 recipe_boost_tree_6 &lt;tibble [1 × 4]&gt; &lt;opts[0]&gt; &lt;list [0]&gt;</span></code></pre></div>
</div>
<div id="parallel-training-fitting" class="section level2">
<h2 class="hasAnchor">
<a href="#parallel-training-fitting" class="anchor"></a>Parallel Training (Fitting)</h2>
<p>We can train each of the combinations in parallel.</p>
<div id="controlling-the-fitting-proces" class="section level3">
<h3 class="hasAnchor">
<a href="#controlling-the-fitting-proces" class="anchor"></a>Controlling the Fitting Proces</h3>
<p>Each fitting function in <code>modeltime</code> has a “control” function:</p>
<ul>
<li>
<code><a href="../reference/control_fit_workflowset.html">control_fit_workflowset()</a></code> for <code><a href="../reference/modeltime_fit_workflowset.html">modeltime_fit_workflowset()</a></code>
</li>
<li>
<code><a href="../reference/control_refit.html">control_refit()</a></code> for <code><a href="../reference/modeltime_refit.html">modeltime_refit()</a></code>
</li>
</ul>
<p>The control functions help the user control the verbosity (adding remarks while training) and set up parallel processing. We can see the output when <code>verbose = TRUE</code> and <code>allow_par = TRUE</code>.</p>
<ul>
<li>
<p><strong>allow_par:</strong> Whether or not the user has indicated that parallel processing should be used.</p>
<ul>
<li><p>If the user has set up parallel processing externally, the clusters will be reused.</p></li>
<li><p>If the user has not set up parallel processing, the fitting (training) process will set up parallel processing internally and shutdown. Note that this is more expensive, and usually costs around 10-15 seconds to set up.</p></li>
</ul>
</li>
<li><p><strong>verbose:</strong> Will return important messages showing the progress of the fitting operation.</p></li>
<li><p><strong>cores:</strong> The cores that the user has set up. Since we’ve already set up <code>doParallel</code> to use 2 cores, the control recognizes this.</p></li>
<li><p><strong>packages:</strong> The packages are packages that will be sent to each of the workers.</p></li>
</ul>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/control_fit_workflowset.html">control_fit_workflowset</a></span><span class="op">(</span>
  verbose   <span class="op">=</span> <span class="cn">TRUE</span>,
  allow_par <span class="op">=</span> <span class="cn">TRUE</span>
<span class="op">)</span>
<span class="co">#&gt; workflowset control object</span>
<span class="co">#&gt; --------------------------</span>
<span class="co">#&gt; allow_par : TRUE </span>
<span class="co">#&gt; cores     : 2 </span>
<span class="co">#&gt; verbose   : TRUE </span>
<span class="co">#&gt; packages  : modeltime parsnip dplyr stats lubridate tidymodels timetk forcats stringr readr tidyverse yardstick workflowsets workflows tune tidyr tibble rsample recipes purrr modeldata infer ggplot2 dials scales broom graphics grDevices utils datasets methods base</span></code></pre></div>
</div>
<div id="fitting-using-parallel-backend" class="section level3">
<h3 class="hasAnchor">
<a href="#fitting-using-parallel-backend" class="anchor"></a>Fitting Using Parallel Backend</h3>
<p>We use the <code><a href="../reference/modeltime_fit_workflowset.html">modeltime_fit_workflowset()</a></code> and <code><a href="../reference/control_fit_workflowset.html">control_fit_workflowset()</a></code> together to train the unfitted workflowset in parallel.</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">model_parallel_tbl</span> <span class="op">&lt;-</span> <span class="va">model_wfset</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="../reference/modeltime_fit_workflowset.html">modeltime_fit_workflowset</a></span><span class="op">(</span>
    data    <span class="op">=</span> <span class="fu"><a href="https://rsample.tidymodels.org/reference/initial_split.html">training</a></span><span class="op">(</span><span class="va">splits</span><span class="op">)</span>,
    control <span class="op">=</span> <span class="fu"><a href="../reference/control_fit_workflowset.html">control_fit_workflowset</a></span><span class="op">(</span>
      verbose   <span class="op">=</span> <span class="cn">TRUE</span>,
      allow_par <span class="op">=</span> <span class="cn">TRUE</span>
    <span class="op">)</span>
  <span class="op">)</span>
<span class="co">#&gt; Using existing parallel backend with 2 clusters (cores)...</span>
<span class="co">#&gt;  Beginning Parallel Loop | 0.008 seconds</span>
<span class="co">#&gt;  Finishing parallel backend. Clusters are remaining open. | 13.403 seconds</span>
<span class="co">#&gt;  Close clusters by running: `parallel_stop()`.</span>
<span class="co">#&gt;  Total time | 13.403 seconds</span></code></pre></div>
<p>This returns a modeltime table.</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">model_parallel_tbl</span>
<span class="co">#&gt; # Modeltime Table</span>
<span class="co">#&gt; # A tibble: 6 × 3</span>
<span class="co">#&gt;   .model_id .model     .model_desc        </span>
<span class="co">#&gt;       &lt;int&gt; &lt;list&gt;     &lt;chr&gt;              </span>
<span class="co">#&gt; 1         1 &lt;workflow&gt; RECIPE_BOOST_TREE_1</span>
<span class="co">#&gt; 2         2 &lt;workflow&gt; RECIPE_BOOST_TREE_2</span>
<span class="co">#&gt; 3         3 &lt;workflow&gt; RECIPE_BOOST_TREE_3</span>
<span class="co">#&gt; 4         4 &lt;workflow&gt; RECIPE_BOOST_TREE_4</span>
<span class="co">#&gt; 5         5 &lt;workflow&gt; RECIPE_BOOST_TREE_5</span>
<span class="co">#&gt; 6         6 &lt;workflow&gt; RECIPE_BOOST_TREE_6</span></code></pre></div>
</div>
<div id="comparison-to-sequential-backend" class="section level3">
<h3 class="hasAnchor">
<a href="#comparison-to-sequential-backend" class="anchor"></a>Comparison to Sequential Backend</h3>
<p>We can compare to a sequential backend. We have a slight perfomance boost. Note that this performance benefit increases with the size of the training task.</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">model_sequential_tbl</span> <span class="op">&lt;-</span> <span class="va">model_wfset</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="../reference/modeltime_fit_workflowset.html">modeltime_fit_workflowset</a></span><span class="op">(</span>
    data    <span class="op">=</span> <span class="fu"><a href="https://rsample.tidymodels.org/reference/initial_split.html">training</a></span><span class="op">(</span><span class="va">splits</span><span class="op">)</span>,
    control <span class="op">=</span> <span class="fu"><a href="../reference/control_fit_workflowset.html">control_fit_workflowset</a></span><span class="op">(</span>
      verbose   <span class="op">=</span> <span class="cn">TRUE</span>,
      allow_par <span class="op">=</span> <span class="cn">FALSE</span>
    <span class="op">)</span>
  <span class="op">)</span>
<span class="co">#&gt; ℹ Fitting Model: 1</span>
<span class="co">#&gt; ✓ Model Successfully Fitted: 1</span>
<span class="co">#&gt; ℹ Fitting Model: 2</span>
<span class="co">#&gt; ✓ Model Successfully Fitted: 2</span>
<span class="co">#&gt; ℹ Fitting Model: 3</span>
<span class="co">#&gt; ✓ Model Successfully Fitted: 3</span>
<span class="co">#&gt; ℹ Fitting Model: 4</span>
<span class="co">#&gt; ✓ Model Successfully Fitted: 4</span>
<span class="co">#&gt; ℹ Fitting Model: 5</span>
<span class="co">#&gt; ✓ Model Successfully Fitted: 5</span>
<span class="co">#&gt; ℹ Fitting Model: 6</span>
<span class="co">#&gt; ✓ Model Successfully Fitted: 6</span>
<span class="co">#&gt; Total time | 16.956 seconds</span></code></pre></div>
</div>
</div>
<div id="accuracy-assessment" class="section level2">
<h2 class="hasAnchor">
<a href="#accuracy-assessment" class="anchor"></a>Accuracy Assessment</h2>
<p>We can review the forecast accuracy. We can see that Model 5 has the lowest MAE.</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">model_parallel_tbl</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="../reference/modeltime_calibrate.html">modeltime_calibrate</a></span><span class="op">(</span><span class="fu"><a href="https://rsample.tidymodels.org/reference/initial_split.html">testing</a></span><span class="op">(</span><span class="va">splits</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="../reference/modeltime_accuracy.html">modeltime_accuracy</a></span><span class="op">(</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="../reference/table_modeltime_accuracy.html">table_modeltime_accuracy</a></span><span class="op">(</span>.interactive <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></code></pre></div>
<div id="zmidnpndej" style="overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>html {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif;
}

#zmidnpndej .gt_table {
  display: table;
  border-collapse: collapse;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#zmidnpndej .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#zmidnpndej .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#zmidnpndej .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 0;
  padding-bottom: 4px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#zmidnpndej .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#zmidnpndej .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#zmidnpndej .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#zmidnpndej .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#zmidnpndej .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#zmidnpndej .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#zmidnpndej .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#zmidnpndej .gt_group_heading {
  padding: 8px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
}

#zmidnpndej .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#zmidnpndej .gt_from_md > :first-child {
  margin-top: 0;
}

#zmidnpndej .gt_from_md > :last-child {
  margin-bottom: 0;
}

#zmidnpndej .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#zmidnpndej .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 12px;
}

#zmidnpndej .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#zmidnpndej .gt_first_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
}

#zmidnpndej .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#zmidnpndej .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#zmidnpndej .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#zmidnpndej .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#zmidnpndej .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#zmidnpndej .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding: 4px;
}

#zmidnpndej .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#zmidnpndej .gt_sourcenote {
  font-size: 90%;
  padding: 4px;
}

#zmidnpndej .gt_left {
  text-align: left;
}

#zmidnpndej .gt_center {
  text-align: center;
}

#zmidnpndej .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#zmidnpndej .gt_font_normal {
  font-weight: normal;
}

#zmidnpndej .gt_font_bold {
  font-weight: bold;
}

#zmidnpndej .gt_font_italic {
  font-style: italic;
}

#zmidnpndej .gt_super {
  font-size: 65%;
}

#zmidnpndej .gt_footnote_marks {
  font-style: italic;
  font-weight: normal;
  font-size: 65%;
}
</style>
<table class="table gt_table">
<thead class="gt_header"><tr>
<th colspan="9" class="gt_heading gt_title gt_font_normal gt_bottom_border" style>Accuracy Table</th>
    </tr></thead>
<thead class="gt_col_headings"><tr>
<th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1">.model_id</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1">.model_desc</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1">.type</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1">mae</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1">mape</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1">mase</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1">smape</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1">rmse</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1">rsq</th>
    </tr></thead>
<tbody class="gt_table_body">
<tr>
<td class="gt_row gt_right">1</td>
<td class="gt_row gt_left">RECIPE_BOOST_TREE_1</td>
<td class="gt_row gt_left">Test</td>
<td class="gt_row gt_right">55572.50</td>
<td class="gt_row gt_right">98.52</td>
<td class="gt_row gt_right">1.63</td>
<td class="gt_row gt_right">194.17</td>
<td class="gt_row gt_right">66953.92</td>
<td class="gt_row gt_right">0.96</td>
</tr>
<tr>
<td class="gt_row gt_right">2</td>
<td class="gt_row gt_left">RECIPE_BOOST_TREE_2</td>
<td class="gt_row gt_left">Test</td>
<td class="gt_row gt_right">48819.23</td>
<td class="gt_row gt_right">86.15</td>
<td class="gt_row gt_right">1.43</td>
<td class="gt_row gt_right">151.49</td>
<td class="gt_row gt_right">58992.30</td>
<td class="gt_row gt_right">0.96</td>
</tr>
<tr>
<td class="gt_row gt_right">3</td>
<td class="gt_row gt_left">RECIPE_BOOST_TREE_3</td>
<td class="gt_row gt_left">Test</td>
<td class="gt_row gt_right">13426.89</td>
<td class="gt_row gt_right">21.69</td>
<td class="gt_row gt_right">0.39</td>
<td class="gt_row gt_right">25.06</td>
<td class="gt_row gt_right">17376.53</td>
<td class="gt_row gt_right">0.98</td>
</tr>
<tr>
<td class="gt_row gt_right">4</td>
<td class="gt_row gt_left">RECIPE_BOOST_TREE_4</td>
<td class="gt_row gt_left">Test</td>
<td class="gt_row gt_right">3699.94</td>
<td class="gt_row gt_right">8.94</td>
<td class="gt_row gt_right">0.11</td>
<td class="gt_row gt_right">8.68</td>
<td class="gt_row gt_right">5163.37</td>
<td class="gt_row gt_right">0.98</td>
</tr>
<tr>
<td class="gt_row gt_right">5</td>
<td class="gt_row gt_left">RECIPE_BOOST_TREE_5</td>
<td class="gt_row gt_left">Test</td>
<td class="gt_row gt_right">3296.74</td>
<td class="gt_row gt_right">7.30</td>
<td class="gt_row gt_right">0.10</td>
<td class="gt_row gt_right">7.37</td>
<td class="gt_row gt_right">5166.48</td>
<td class="gt_row gt_right">0.98</td>
</tr>
<tr>
<td class="gt_row gt_right">6</td>
<td class="gt_row gt_left">RECIPE_BOOST_TREE_6</td>
<td class="gt_row gt_left">Test</td>
<td class="gt_row gt_right">3612.70</td>
<td class="gt_row gt_right">8.15</td>
<td class="gt_row gt_right">0.11</td>
<td class="gt_row gt_right">8.24</td>
<td class="gt_row gt_right">5308.19</td>
<td class="gt_row gt_right">0.98</td>
</tr>
</tbody>
</table>
</div>
</div>
<div id="forecast-assessment" class="section level2">
<h2 class="hasAnchor">
<a href="#forecast-assessment" class="anchor"></a>Forecast Assessment</h2>
<p>We can visualize the forecast.</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">model_parallel_tbl</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="../reference/modeltime_forecast.html">modeltime_forecast</a></span><span class="op">(</span>
    new_data    <span class="op">=</span> <span class="fu"><a href="https://rsample.tidymodels.org/reference/initial_split.html">testing</a></span><span class="op">(</span><span class="va">splits</span><span class="op">)</span>,
    actual_data <span class="op">=</span> <span class="va">dataset_tbl</span>,
    keep_data   <span class="op">=</span> <span class="cn">TRUE</span>
  <span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span><span class="op">(</span><span class="va">id</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="../reference/plot_modeltime_forecast.html">plot_modeltime_forecast</a></span><span class="op">(</span>
    .facet_ncol  <span class="op">=</span> <span class="fl">3</span>,
    .interactive <span class="op">=</span> <span class="cn">FALSE</span>
  <span class="op">)</span></code></pre></div>
<p><img src="parallel-processing_files/figure-html/unnamed-chunk-16-1.png" width="100%" style="display: block; margin: auto;"></p>
</div>
<div id="closing-clusters" class="section level2">
<h2 class="hasAnchor">
<a href="#closing-clusters" class="anchor"></a>Closing Clusters</h2>
<p>We can close the parallel clusters using <code><a href="../reference/parallel_start.html">parallel_stop()</a></code>.</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/parallel_start.html">parallel_stop</a></span><span class="op">(</span><span class="op">)</span></code></pre></div>
</div>
</div>
<div id="summary" class="section level1">
<h1 class="hasAnchor">
<a href="#summary" class="anchor"></a>Summary</h1>
<p>We just showcased a simple Hyperparameter Tuning example using Parallel Processing. But this is a simple problem. And, there’s a lot more to learning time series.</p>
<ul>
<li>Many more algorithms</li>
<li>Ensembling</li>
<li>Machine Learning</li>
<li>Deep Learning</li>
<li>Scalable Modeling: 10,000+ time series</li>
</ul>
<p>Your probably thinking how am I ever going to learn time series forecasting. Here’s the solution that will save you years of struggling.</p>
<div id="take-the-high-performance-forecasting-course" class="section level2">
<h2 class="hasAnchor">
<a href="#take-the-high-performance-forecasting-course" class="anchor"></a>Take the High-Performance Forecasting Course</h2>
<blockquote>
<p>Become the forecasting expert for your organization</p>
</blockquote>
<p><a href="https://university.business-science.io/p/ds4b-203-r-high-performance-time-series-forecasting/" target="_blank"><img src="https://www.filepicker.io/api/file/bKyqVAi5Qi64sS05QYLk" alt="High-Performance Time Series Forecasting Course" width="100%" style="box-shadow: 0 0 5px 2px rgba(0, 0, 0, .5);"></a></p>
<p><a href="https://university.business-science.io/p/ds4b-203-r-high-performance-time-series-forecasting/"><em>High-Performance Time Series Course</em></a></p>
<div id="time-series-is-changing" class="section level3">
<h3 class="hasAnchor">
<a href="#time-series-is-changing" class="anchor"></a>Time Series is Changing</h3>
<p>Time series is changing. <strong>Businesses now need 10,000+ time series forecasts every day.</strong> This is what I call a <em>High-Performance Time Series Forecasting System (HPTSF)</em> - Accurate, Robust, and Scalable Forecasting.</p>
<p><strong>High-Performance Forecasting Systems will save companies by improving accuracy and scalability.</strong> Imagine what will happen to your career if you can provide your organization a “High-Performance Time Series Forecasting System” (HPTSF System).</p>
</div>
<div id="how-to-learn-high-performance-time-series-forecasting" class="section level3">
<h3 class="hasAnchor">
<a href="#how-to-learn-high-performance-time-series-forecasting" class="anchor"></a>How to Learn High-Performance Time Series Forecasting</h3>
<p>I teach how to build a HPTFS System in my <a href="https://university.business-science.io/p/ds4b-203-r-high-performance-time-series-forecasting"><strong>High-Performance Time Series Forecasting Course</strong></a>. You will learn:</p>
<ul>
<li>
<strong>Time Series Machine Learning</strong> (cutting-edge) with <code>Modeltime</code> - 30+ Models (Prophet, ARIMA, XGBoost, Random Forest, &amp; many more)</li>
<li>
<strong>Deep Learning</strong> with <code>GluonTS</code> (Competition Winners)</li>
<li>
<strong>Time Series Preprocessing</strong>, Noise Reduction, &amp; Anomaly Detection</li>
<li>
<strong>Feature engineering</strong> using lagged variables &amp; external regressors</li>
<li><strong>Hyperparameter Tuning</strong></li>
<li><strong>Time series cross-validation</strong></li>
<li>
<strong>Ensembling</strong> Multiple Machine Learning &amp; Univariate Modeling Techniques (Competition Winner)</li>
<li>
<strong>Scalable Forecasting</strong> - Forecast 1000+ time series in parallel</li>
<li>and more.</li>
</ul>
<p class="text-center" style="font-size:24px;">
Become the Time Series Expert for your organization.
</p>
<br><p class="text-center" style="font-size:30px;">
<a href="https://university.business-science.io/p/ds4b-203-r-high-performance-time-series-forecasting">Take the High-Performance Time Series Forecasting Course</a>
</p>
</div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by Matt Dancho.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
